# GenORDER: from Operational Knowledge Rules to Executable Order Scenarios

## Core Definitions {#core-definitions}

| Term | Definition |
| ----- | ----- |
| *GenORDER* | The execution-layer system that transforms Operational Knowledge Rules (OKRs) into patient-specific, fully computable and executable Order Scenarios. |
| *Operational Knowledge Rule (OKR)* | A fully structured, machine-interpretable, constraint-based representation of expert medication (and other clinical) knowledge produced by GenFORM. |
| *Selection Constraint* | A categorical constraint used to determine which OKRs apply to a given Order Context (e.g., indication, generic, route, form, setting). |
| *Calculation Constraint* | A quantitative constraint used to compute numerical values such as dose quantities, rates, volumes, or durations. |
| *Order Context* | The bounded clinical context; composed of a specific Patient (instance), indication(s), and selection constraints from which Order Scenarios are generated. The Patient's attributes are matched against Patient Categories in OKRs. |
| *Order Scenario* | A fully constrained, uniquely identifiable, computable clinical alternative representing one valid way to prescribe, prepare, and administer an order. |
| *Order* | The executable prescription instance derived from an Order Scenario, identified by a unique Id. |
| *Schedule* | The temporal model of an Order defining frequency, administration time, and total duration. |
| *Orderable* | The abstract entity that is ordered (e.g., a medication as prescribed). |
| *Component* | A physical product unit used to realize an Orderable (e.g., vial, ampoule, bag). |
| *Item* | The actual substance delivered to the patient (e.g., a medication substance such as amoxicillin). |
| *Dose Quantity* | The amount delivered per single administration. |
| *Dose Per Time* | The accumulated dose delivered per unit time (e.g., per day). |
| *Dose Rate* | The continuous delivery speed of a dose (unit per time), typically used for infusions. |
| *Dose Total* | The cumulative dose delivered over the full duration of an Order. |
| *Adjusted Dose* | A dose value normalized to a patient-specific Adjustment Quantity (e.g., kg, m²). |
| *Adjustment Unit* | The patient normalization unit used for dose scaling (e.g., kg for body weight, m² for body surface area). |
| *Adjustment Quantity* | The patient-specific numeric value used to apply an Adjusted Dose (e.g., 12 kg). |
| *Filter Stage* | The stage in which categorical selection constraints are applied to determine which rules and scenarios are applicable. |
| *Solver Stage* | The stage in which quantitative calculation constraints are transformed into equations and solved by GenSOLVER. |
| *GenSOLVER* | The constraint solving engine that resolves the equation systems generated by GenORDER into numerically valid solutions. |
| *Patient Category* | A categorical description of the type of patient a rule applies to, defined by ranges for age, weight, BSA, gestational age, post-menstrual age, and gender. Used by GenFORM to define which patients an OKR covers. (See [Core Domain Model](core-domain.md#core-definitions)) |
| *Patient* | A specific individual patient instance with concrete values for age, weight, BSA, etc. Used by GenORDER to match against Patient Categories and compute patient-specific Order Scenarios. |
| *Exposure* | The real-world administration of an executable Order to a patient. |
| *Outcome* | The observed clinical effect resulting from Exposure, used for evaluation and feedback. |

## 1. Positioning of GenORDER {#1.-positioning-of-genorder}

GenORDER is the execution-layer follow-up of GenFORM. Where [GenFORM](genform-free-text-to-operational-rules.md) is responsible for extracting, structuring, and validating Operational Knowledge Rules (OKRs), GenORDER is responsible for transforming these rules into concrete, patient-specific, executable order scenarios (Appendix A. The Medication Treatment Cycle). See [Core Domain Model: The Transformation Pipeline](core-domain.md#the-transformation-pipeline) for the overall architecture.

The transformation chain is:

```text
GenFORM (OKRs) → Selection Constraints → Calculation Constraints → GenORDER (Order Scenarios) → GenSOLVER (Equations) → Computed Orders
```

GenFORM guarantees formal validity of all options. GenORDER guarantees computability and workflow execution of those formally valid options.

## 2. Objectives {#2.-objectives}

GenORDER enables the medication (order) process as a cyclic operational process in which an Order is:

1. Prescribed  
2. Validated  
3. Planned  
4. Prepared  
5. Administered
6. Evaluated

GenORDER consumes Operational Knowledge Rules by transforming GenFORM’s selection and calculation constraints into Order Scenarios (Appendix B.1. GenORDER Conceptual Architecture). These order scenarios define the full quantitative and qualitative parameter space that a clinician can safely choose from.

All quantitative options calculated by GenORDER are guaranteed to be valid by construction, because they are derived exclusively from GenFORM-validated constraints.

## 3. Formal Constraint Execution Model {#3.-formal-constraint-execution-model}

GenORDER operates as the execution engine of a hybrid constraint system:

### 3.1. Filter Stage (Inherited from GenFORM) {#3.1.-filter-stage-(inherited-from-genform)}

At this stage, categorical constraints originating from GenFORM are applied:

* Generic  
* Indication  
* Route  
* Pharmaceutical Form  
* Setting  
* Patient Category  
* Dose Type  
* Administration Access

This stage produces a bounded rule domain that is guaranteed to contain only clinically valid rule sets.

### 3.2 Solver Stage (GenORDER + GenSOLVER) {#3.2-solver-stage-(genorder-+-gensolver)}

GenORDER transforms the quantitative calculation constraints into explicit equations. These equations are passed to [GenSOLVER](gensolver-from-orders-to-quantitative-solutions.md), which applies constraint logic programming and monotonic domain refinement to compute valid numerical values.

## 4. OrderContext {#4.-ordercontext}

An OrderContext is created using:

* A Patient (specific instance with concrete attribute values)
* One or more Indications  
* A bounded set of Selection Constraints

The Patient's attributes (age, weight, BSA, etc.) are matched against Patient Category ranges in OKRs to determine which rules apply. See [Core Domain Model: Core Definitions](core-domain.md#core-definitions) for the distinction between Patient Category and Patient.

The OrderContext determines:

* Which Prescription Rules apply  
* Which Order Scenarios can be generated

The minimal selection required to produce Order Scenarios is:

* Indication  
* Generic  
* Route and/or Form  
* Dose Type

When the selection satisfies the above, a set of Order Scenarios is calculated.

## 5. Order Scenario {#5.-order-scenario}

An Order Scenario defines a fully computable medication use scenario and consists of:

* Order  
* Textual Representation  
* Settings

Each Order Scenario represents a unique, fully constrained clinical alternative that the user can safely choose.

## 6. Order Model (Executable Structure) {#6.-order-model-(executable-structure)}

GenORDER uses a generic, domain-independent Order model that can represent medication orders as well as other clinical orders (Appendix C.1. Order Model Figure).

### 6.1. Core Objects {#6.1.-core-objects}

* Order: Identified by a unique Id  
* Schedule: Defines how an Order is timed  
* Orderable: What is ordered  
* Component: What physical product is used  
* Item: What substance is delivered

Each Orderable consists of one or more Components. Each Component consists of one or more Items (Appendix C.2. Order Model Table).

## 7. Quantitative Dose Semantics {#7.-quantitative-dose-semantics}

GenORDER distinguishes the following quantitative dose concepts:

* Dose Quantity: amount per administration  
* Dose Per Time: accumulated dose per time unit  
* Dose Rate: continuous delivery rate  
* Dose Total: cumulative dose over the entire order duration

Each of the above also supports patient-adjusted variants using Adjustment Units (kg, m²).

Mathematical Dose relations:

* Dose PerTime = Dose Quantity × Frequency
* Dose Total = Dose PerTime × Order Duration
* Dose Quantity = Dose Rate × Administration Time
* Base Dose = Adjusted Dose × Adjustment Quantity

These relations form the equation system that GenSOLVER resolves.

## 8. Equation System and Solver Integration {#8.-equation-system-and-solver-integration}

GenORDER maps all Order, Orderable, Component and Item properties to symbolic variables. These variables are used to construct the formal equation system that is solved by [GenSOLVER](gensolver-from-orders-to-quantitative-solutions.md).

The solver guarantees (see [GenSOLVER Section 3: Formal Constraint Solving Model](gensolver-from-orders-to-quantitative-solutions.md#3-formal-constraint-solving-model)):

* Soundness: all solutions satisfy all constraints  
* Completeness: all valid solutions remain available  
* Monotonic convergence: each constraint application reduces the solution space

## 9. Relationship Between Rule-Based and AI-Based CDS {#9.-relationship-between-rule-based-and-ai-based-cds}

GenORDER operates exclusively on Rule-Based CDS generated by GenFORM. This ensures:

* Formal safety  
* Regulatory traceability  
* Deterministic reproducibility

AI-Based CDS can operate on top of this bounded solution space, but is never allowed to violate the formal constraint envelope defined by GenFORM and executed by GenORDER.

## 10. Exposure and Outcome Feedback {#10.-exposure-and-outcome-feedback}

GenORDER produces executable orders that result in real-world administrations. These administrations form the Exposure layer. Clinical Evaluation produces the Outcome layer.

The combination of Exposure and Outcome can be used to:

* Validate existing Operational Knowledge Rules  
* Refine quantitative constraints  
* Feed back into expert knowledge

This completes the full learning loop of:

Expert Knowledge → Operational Knowledge Rules → Orders → Exposure → Outcome → Updated Expert Knowledge

## 11. Summary of Responsibilities {#11.-summary-of-responsibilities}

**GenFORM** (see [GenFORM: Free Text to Operational Rules](genform-free-text-to-operational-rules.md)):

* Extracts expert knowledge  
* Structures Operational Knowledge Rules  
* Defines Patient Categories and Selection/Calculation Constraints
* Guarantees formal validity

**GenORDER**:

* Transforms OKRs into executable Order Scenarios  
* Constructs symbolic equation systems
* Matches Patient instances against Patient Category ranges
* Orchestrates solver execution  
* Produces workflow-ready clinical orders

**GenSOLVER** (see [GenSOLVER: Order Scenarios to Quantitative Solutions](gensolver-from-orders-to-quantitative-solutions.md)):

* Solves all quantitative constraints  
* Produces numerically valid, unit-consistent solutions
* Guarantees soundness, completeness, and traceability

## Related Documents

This GenORDER document is part of the GenPRES domain documentation. For the complete picture, refer to:

| Document | Description |
| -------- | ----------- |
| [Core Domain Model](core-domain.md) | High-level overview of the transformation pipeline, core definitions, and system architecture. |
| [GenFORM: Free Text to Operational Rules](genform-free-text-to-operational-rules.md) | How free-text expert knowledge is transformed into structured Operational Knowledge Rules (OKRs). |
| [GenSOLVER: Order Scenarios to Quantitative Solutions](gensolver-from-orders-to-quantitative-solutions.md) | The quantitative constraint solving engine that computes valid numerical values from the equation systems. |

## Appendices {#appendices}

### Appendix A. The Medication Treatment Cycle {#appendix-a.-the-medication-treatment-cycle}

![image1](https://docs.google.com/drawings/d/e/2PACX-1vRenb7b36iQWiNvOj3_KiRkMFABNwlt_xOA2lWkWMo24-2SFmhNOtU9uzOMtGF4-hC67rOs6pO9tDJI/pub?w=960&h=599)

### Appendix B.1. GenORDER Conceptual Architecture {#appendix-b.1.-genorder-conceptual-architecture}

![image2](https://docs.google.com/drawings/d/e/2PACX-1vRu889V2jIJb_3SJ60pcE7lx0cd9r4caWs3miw_M9cb6LLO9Y8rsAz8j60GSYyskmN6W5-4i3J_H1R2/pub?w=958&h=654)

### Appendix B.2. GenORDER Technical Architecture {#appendix-b.2.-genorder-technical-architecture}

![image3](https://docs.google.com/drawings/d/e/2PACX-1vSvbbHm3JutpteK6TK7u84p6DGu6F44JuAhiTu2KXj4pE_Pg8Jrxey8Fe7mZUr4eVqPt8NHq0TYi3Tb/pub?w=817&h=519)

### Addendum B.3. GenORDER Libraries {#addendum-b.3.-genorder-libraries}

Classification:

* **Utility Library**  
* **Domain Library**  
* **Application**

Libraries:  
List of libraries and applications along with capabilities.

1. **Informedica.Agents.Lib:** Library using the FSharp MailboxProcessor to create message based agents.
   * Capabilities:
     * Message-based agent abstraction using F# MailboxProcessor  
     * Asynchronous, concurrent API execution model  
     * Specific low level agent implementations  

2. **Informedica.Logging.Lib:** Library with advanced printing capabilities to enable human readable logging for analysis.
   * Capabilities:  
     * Human-readable logging and structured output for analysis  
     * Advanced printing and formatting capabilities  
     * Agent-based logging service  

3. **Informedica.GenSOLVER.Lib:** Domain library for the calculation engine. Can solve product and sum equations using value unit combinations as ranges.
   * Capabilities:  
     * Constraint-solving calculation engine  
     * Product and sum equation solving with value-unit ranges  
     * Variable propagation and constraint satisfaction  
     * Can log all messages and calculation steps  
     * Can run as an agent microservice

4. **Informedica.GenFORM.Lib:** Handles all rule sets and combines those with products creating specific patient context prescription rules.
   * Capabilities:  
     * Unified rule set management across all sources  
     * Patient-context-specific prescription rule generation  
     * Product-rule combination and validation  
     * Can store and retrieve products and rules in OTS  
     * Can log all rule retrieval messages  
     * Can run as an agent based microservice  
     * Can be accessed as a MCP service

5. **Informedica.GenORDER.Lib:** Domain library providing a structured representation of orders (medication/nutrition) and turning orders into equations for calculation by GenSOLVER.
   * Capabilities:  
     * Structured medication and nutrition order representation  
     * Conversion of orders to equations for GenSOLVER  
     * Order validation and constraint generation  
     * Can log all order processing messages  
     * Can run as an agent based microservice  
     * Can be exposed via MCP host

6. **Informedica.MCP.Lib:** Library enabling a MCP implementation and using LLMs.
   * Capabilities:  
     * Model Context Protocol (MCP) framework implementation in F#  
     * LLM-powered extraction of structured typed records from free text  
     * Agent-based MCP service execution  
     * Can host GenFORM, GenORDER

7. **Informedica.FHIR.Lib:** Library to convert orders to FHIR format for integration.  
   * Capabilities:  
     * FHIR resource serialization and deserialization  
     * Order-to-FHIR conversion for interoperability  
     * FHIR validation and compliance  
     * Can log all FHIR conversion messages  
     * Can run as an agent based microservice

8. **Informedica.DataPlatform.Lib:** Library to send and retrieve patient order sets to and from the Data Platform.  
   * Capabilities:  
     * Data Platform integration for patient order persistence  
     * Order set storage, retrieval, and synchronization  
     * Can log all storage retrieval messages  
     * Can run as an agent based microservice

9. **Informedica.HIXConnect.Lib:** Library to send and retrieve patient order sets to and from EHR, along with session and authentication/authorization.
   * Capabilities:  
     * EHR (HIX) integration for order management  
     * Session management and authentication/authorization  
     * Bi-directional order synchronization with EHR systems  
     * Can log all storage retrieval messages  
     * Can run as an agent based microservice

10. **Informedica.GenPRES.Server:** Service application that handles all messaging to and from GenPRES.
    * Capabilities:  
      * Backend service for GenPRES messaging and orchestration  
      * API endpoints for client applications  
      * Integration hub for EHR, Data Platform, and business logic  
      * Can use MCP hosted services

11. **Informedica.GenPRES.Client:** Client application that handles the desktop and mobile views for GenPRES.
    * Capabilities:  
      * Desktop and mobile user interface for prescription management  
      * User interaction layer for GenPRES functionality  
      * Client-side workflow orchestration

### Appendix C.1. Order Model Figure {#appendix-c.1.-order-model-figure}

![image4](https://docs.google.com/drawings/d/e/2PACX-1vTgBB0m625rx2mrDYibTaQ2moIUVPkJNKTRm8yvvWu5JaOZE-HcyoDIFtfLjYQluqKkl23_p4qRJWQG/pub?w=1299&h=665)

### Appendix C.2. Order Model Table {#appendix-c.2.-order-model-table}

| No | Short Name | Long Name | Type | Unit | Description |
| ----- | ----- | ----- | ----- | ----- | ----- |
| 1 | [itm]_cmp_qty | Item.ComponentQuantity | Quantity | Item Unit | Quantity of Item in a Component |
| 2 | [itm]_cmp_cnc | Item.ComponentConcentration | Concentration | Item Unit / Component Unit | Concentration of Item in a Component |
| 3 | [itm]_orb_qty | Item.Orderable.Quantity | Quantity | Item Unit | Quantity of Item in an Orderable |
| 4 | [itm]_orb_cnc | Item.OrderableConcentration | Concentration | Item Unit / Orderable Unit | Concentration of Item in an Orderable |
| 5 | [itm]_dos_qty | Item.Dose.Quantity | Quantity | Item Unit | Dose Quantity of an Item |
| 6 | [itm]_dos_ptm | Item.Dose.PerTime | PerTime | Item Unit / Time Unit | Dose per unit time of an Item |
| 7 | [itm]_dos_rte | Item.Dose.Rate | Rate | Item Unit / Time Unit | Dose Rate of an Item |
| 8 | [itm]_dos_tot | Item.Dose.Total | Total | Item Unit | Total dose over the order duration |
| 9 | [itm]_dos_qty_adj | Item.Dose.QuantityAdjust | QuantityAdjust | Item Unit / Adjust Unit | Adjusted Dose Quantity of an Item |
| 10 | [itm]_dos_ptm_adj | Item.Dose.PerTimeAdjust | PerTimeAdjust | Item Unit / Adjust Unit / Time Unit | Adjusted dose per unit time of an Item |
| 11 | [itm]_dos_rte_adj | Item.Dose.RateAdjust | RateAdjust | Item Unit / Adjust Unit / Time Unit | Adjusted Dose Rate of an Item |
| 12 | [itm]_dos_tot_adj | Item.Dose.TotalAdjust | TotalAdjust | Item Unit / Adjust Unit | Adjusted total dose over the order duration |
| 13 | [cmp]_cmp_qty | Component.Quantity | Quantity | Component Unit | Quantity of Component |
| 14 | [cmp]_orb_qty | Component.Orderable.Quantity | Quantity | Component Unit | Quantity of Component in an Orderable |
| 15 | [cmp]_orb_cnc | Component.OrderableConcentration | Concentration | Component Unit / Orderable Unit | Concentration of a Component in an Orderable |
| 16 | [cmp]_orb_cnt | Component.OrderableCount | Count | Count Unit | Amount of Components in an Orderable |
| 17 | [cmp]_ord_qty | Component.OrderQuantity | Quantity | Component Unit | Quantity of Component in an Order |
| 18 | [cmp]_ord_cnt | Component.OrderCount | Count | Count Unit | Amount of Components in an Order |
| 19 | [cmp]_dos_qty | Component.Dose.Quantity | Quantity | Component Unit | Dose Quantity of a Component |
| 20 | [cmp]_dos_ptm | Component.Dose.PerTime | PerTime | Component Unit / Time Unit | Dose per unit time of a Component |
| 21 | [cmp]_dos_rte | Component.Dose.Rate | Rate | Component Unit / Time Unit | Dose Rate of a Component |
| 22 | [cmp]_dos_tot | Component.Dose.Total | Total | Component Unit | Total component dose over the order duration |
| 23 | [cmp]_dos_qty_adj | Component.Dose.QuantityAdjust | QuantityAdjust | Component Unit / Adjust Unit | Adjusted Dose Quantity of a Component |
| 24 | [cmp]_dos_ptm_adj | Component.Dose.PerTimeAdjust | PerTimeAdjust | Component Unit / Adjust Unit / Time Unit | Adjusted dose per unit time of a Component |
| 25 | [cmp]_dos_rte_adj | Component.Dose.RateAdjust | RateAdjust | Component Unit / Adjust Unit / Time Unit | Adjusted Dose Rate of a Component |
| 26 | [cmp].dos_tot_adj | Component.Dose.TotalAdjust | TotalAdjust | Component Unit / Adjust Unit | Adjusted total component dose over the order |
| 27 | [orb]_orb_qty | Orderable.Quantity | Quantity | Orderable Unit | Quantity of Orderable |
| 28 | [orb]_ord_qty | Orderable.OrderQuantity | Quantity | Orderable Unit | Quantity of Orderable in an Order |
| 29 | [orb]_ord_cnt | Orderable.OrderCount | Count | Count Unit | Amount of Orderable in an Order |
| 30 | [orb]_dos_cnt | Orderable.Dose.Count | Count | Count Unit | Number of dose units per orderable unit |
| 31 | [orb]_dos_qty | Orderable.Dose.Quantity | Quantity | Orderable Unit | Dose Quantity of an Orderable |
| 32 | [orb]_dos_ptm | Orderable.Dose.PerTime | PerTime | Orderable Unit / Time Unit | Dose per unit time of an Orderable |
| 33 | [orb]_dos_rte | Orderable.Dose.Rate | Rate | Orderable Unit / Time Unit | Dose Rate of an Orderable |
| 34 | [orb]_dos_tot | Orderable.Dose.Total | Total | Orderable Unit | Total orderable dose over the order duration |
| 35 | [orb]_dos_qty_adj | Orderable.Dose.QuantityAdjust | QuantityAdjust | Orderable Unit / Adjust Unit | Adjusted Dose Quantity of an Orderable |
| 36 | [orb]_dos_ptm_adj | Orderable.Dose.PerTimeAdjust | PerTimeAdjust | Orderable Unit / Adjust Unit / Time Unit | Adjusted dose per unit time of an Orderable |
| 37 | [orb]_dos_rte_adj | Orderable.Dose.RateAdjust | RateAdjust | Orderable Unit / Adjust Unit / Time Unit | Adjusted Dose Rate of an Orderable |
| 38 | [orb]_dos_tot_adj | Orderable.Dose.TotalAdjust | TotalAdjust | Orderable Unit / Adjust Unit | Adjusted total orderable dose over the order |
| 39 | [ord]_sch_frq | Schedule.Frequency | Frequency | Count Unit / Time Unit | Frequency of administration |
| 40 | [ord]_sch_tme | Schedule.Time | Time | Time Unit | Time of administration |
| 41 | [ord]_adj_qty | Order.Adjust.Quantity | Quantity | Adjust Unit | Quantity used to adjust dose |
| 42 | [ord]_ord_tme | Order.Time | Time | Time Unit | Duration of the order |

### Appendix D.1. Equations Table {#appendix-d.1.-equations-table}

| No | Formula | Discont | Cont | Timed | Once | Once Timed |
| :---- | :---- | ----- | ----- | ----- | ----- | ----- |
| 1 | [itm]_cmp_qty = [itm]_cmp_cnc * [cmp]_cmp_qty | x | x | x | x | x |
| 2 | [itm]_orb_qty = [itm]_orb_cnc * [orb]_orb_qty | x | x | x | x | x |
| 3 | [itm]_orb_qty = [itm]_cmp_cnc * [cmp]_orb_qty | x | x | x | x | x |
| 4 | [itm]_dos_qty = [itm]_cmp_cnc * [cmp]_dos_qty | x | x | x | x | x |
| 5 | [itm]_dos_qty = [itm]_orb_cnc * [orb]_dos_qty | x | x | x | x | x |
| 6 | [itm]_dos_qty = [itm]_dos_rte * [ord]_sch_tme |  |  |  |  |  |
| 7 | [itm]_dos_qty = [itm]_dos_qty_adj * [ord]_adj_qty | x | x | x | x | x |
| 8 | [itm]_dos_ptm = [itm]_cmp_cnc * [cmp]_dos_ptm | x |  | x |  |  |
| 9 | [itm]_dos_ptm = [itm]_orb_cnc * [orb]_dos_ptm | x |  | x |  |  |
| 10 | [itm]_dos_ptm = [itm]_dos_qty * [ord]_sch_frq | x |  | x |  |  |
| 11 | [itm]_dos_ptm = [itm]_dos_ptm_adj * [ord]_adj_qty | x |  | x |  |  |
| 12 | [itm]_dos_rte = [itm]_cmp_cnc * [cmp]_dos_rte |  | x |  |  |  |
| 13 | [itm]_dos_rte = [itm]_orb_cnc * [orb]_dos_rte |  | x |  |  |  |
| 14 | [itm]_dos_rte = [itm]_dos_rte_adj * [ord]_adj_qty |  | x |  |  |  |
| 15 | [itm]_dos_tot = [itm]_dos_ptm * [ord]_ord_tme | x |  | x |  |  |
| 16 | [itm]_dos_tot = [itm]_dos_rte * [ord]_ord_tme |  | x |  |  |  |
| 17 | [itm]_dos_qty_adj = [itm]_cmp_cnc * [cmp]_dos_qty_adj | x | x | x | x | x |
| 18 | [itm]_dos_qty_adj = [itm]_orb_cnc * [orb]_dos_qty_adj | x | x | x | x | x |
| 19 | [itm]_dos_qty_adj = [itm]_dos_rte_adj * [ord]_sch_tme |  |  |  |  |  |
| 20 | [itm]_dos_ptm_adj = [itm]_cmp_cnc * [cmp]_dos_ptm_adj | x | x | x |  |  |
| 21 | [itm]_dos_ptm_adj = [itm]_orb_cnc * [orb]_dos_ptm_adj | x | x | x |  |  |
| 22 | [itm]_dos_ptm_adj = [itm]_dos_qty_adj * [ord]_sch_frq | x |  | x |  |  |
| 23 | [itm]_dos_rte_adj = [itm]_cmp_cnc * [cmp]_dos_rte_adj |  | x |  |  |  |
| 24 | [itm]_dos_rte_adj = [itm]_orb_cnc * [orb]_dos_rte_adj |  | x |  |  |  |
| 25 | [itm]_dos_tot_adj = [itm]_dos_ptm_adj * [ord]_ord_tme | x |  | x |  |  |
| 26 | [itm]_dos_tot_adj = [itm]_dos_rte_adj * [ord]_ord_tme |  | x |  |  |  |
| 27 | [cmp]_orb_qty = [cmp]_orb_cnc * [orb]_orb_qty | x | x | x | x | x |
| 28 | [cmp]_orb_qty = [orb]_dos_cnt * [cmp]_dos_qty | x | x | x | x | x |
| 29 | [cmp]_orb_qty = [cmp]_cmp_qty * [cmp]_orb_cnt | x | x | x | x | x |
| 30 | [cmp]_ord_qty = [cmp]_cmp_qty * [cmp]_ord_cnt | x | x | x | x | x |
| 31 | [cmp]_dos_tot = [cmp]_dos_ptm * [ord]_ord_tme | x | x | x |  |  |
| 32 | [cmp]_dos_tot = [cmp]_dos_rte * [ord]_ord_tme |  | x |  |  |  |
| 33 | [cmp]_dos_qty = [cmp]_orb_cnc * [orb]_dos_qty | x | x | x | x | x |
| 34 | [cmp]_dos_qty = [cmp]_dos_rte * [ord]_sch_tme |  |  |  |  |  |
| 35 | [cmp]_dos_qty = [cmp]_dos_qty_adj * [ord]_adj_qty | x | x | x | x | x |
| 36 | [cmp]_dos_ptm = [cmp]_orb_cnc * [orb]_dos_ptm | x |  | x |  |  |
| 37 | [cmp]_dos_ptm = [cmp]_dos_qty * [ord]_sch_frq | x |  | x |  |  |
| 38 | [cmp]_dos_ptm = [cmp]_dos_ptm_adj * [ord]_adj_qty | x |  | x |  |  |
| 39 | [cmp]_dos_rte = [cmp]_orb_cnc * [orb]_dos_rte |  | x |  |  |  |
| 40 | [cmp]_dos_rte = [cmp]_dos_rte_adj * [ord]_adj_qty |  | x |  |  |  |
| 41 | [cmp]_dos_qty_adj = [cmp]_orb_cnc * [orb]_dos_qty_adj | x | x | x | x | x |
| 42 | [cmp]_dos_qty_adj = [cmp]_dos_rte_adj * [ord]_sch_tme |  |  |  |  |  |
| 43 | [cmp]_dos_ptm_adj = [cmp]_orb_cnc * [orb]_dos_ptm_adj | x |  | x |  |  |
| 44 | [cmp]_dos_ptm_adj = [cmp]_dos_qty_adj * [ord]_sch_frq | x |  | x |  |  |
| 45 | [cmp]_dos_rte_adj = [cmp]_orb_cnc * [orb]_dos_rte_adj |  | x |  |  |  |
| 46 | [orb]_orb_qty = [orb]_dos_cnt * [orb]_dos_qty | x | x | x | x | x |
| 47 | [orb]_ord_qty = [orb]_ord_cnt * [orb]_orb_qty | x | x | x | x | x |
| 48 | [orb]_dos_tot = [orb]_dos_ptm * [ord]_ord_tme | x | x | x |  |  |
| 49 | [orb]_dos_tot = [orb]_dos_rte * [ord]_ord_tme | x | x | x |  |  |
| 50 | [orb]_dos_qty = [orb]_dos_rte * [ord]_sch_tme |  | x | x |  | x |
| 51 | [orb]_dos_qty = [orb]_dos_qty_adj * [ord]_adj_qty | x | x | x | x | x |
| 52 | [orb]_dos_ptm = [orb]_dos_qty * [ord]_sch_frq | x |  | x |  |  |
| 53 | [orb]_dos_ptm = [orb]_dos_ptm_adj * [ord]_adj_qty | x |  | x |  |  |
| 54 | [orb]_dos_rte = [orb]_dos_rte_adj * [ord]_adj_qty |  | x | x |  | x |
| 55 | [orb]_dos_qty_adj = [orb]_dos_rte_adj * [ord]_sch_tme |  |  |  |  |  |
| 56 | [orb]_dos_ptm_adj = [orb]_dos_qty_adj * [ord]_sch_frq | x |  | x |  |  |
| 57 | [orb]_orb_qty = sum([cmp]_orb_qty) | x | x | x | x | x |
| 58 | [orb]_dos_qty = sum([cmp]_dos_qty) | x | x | x | x | x |
| 59 | [orb]_dos_ptm = sum([cmp]_dos_ptm) | x |  | x |  |  |
| 60 | [orb]_dos_rte = sum([cmp]_dos_rte) |  | x |  |  |  |
| 61 | [orb]_dos_tot = sum([cmp]_dos_tot) | x | x | x |  |  |
| 62 | [orb]_dos_qty_adj = sum([cmp]_dos_qty_adj) |  |  |  |  |  |
| 63 | [orb]_dos_ptm_adj = sum([cmp]_dos_ptm_adj) |  |  |  |  |  |
| 64 | [orb]_dos_rte_adj = sum([cmp]_dos_rte_adj) |  |  |  |  |  |
| 65 | [orb]_dos_tot_adj = sum([cmp]_dos_tot_adj) |  |  |  |  |  |

Discont: Discontinuous  
Cont: Continuous

##

### Appendix D.2. DoseType Specific Variables {#appendix-d.2.-dosetype-specific-variables}

Note on rate vs per-time:

* dos_rte: instantaneous rate/speed (Unit/Time), typical for continuous infusions.  
* dos_ptm: quantity per unit time (Unit/Time) derived from discrete administrations (dose x frequency). Timed regimens often specify both: dos_rte for infusion rate and dos_ptm for prescribed periodic dose.

#### - Variables for Prescription {#--variables-for-prescription}

The prescription defines regimen (how often, how long) and the intended dose at orderable and, if needed, at component/item level.

*

| Variable | Name | Unit | Description |
| :---- | :---- | :---- | :---- |
| [ord]_sch_frq | Schedule.Frequency | Count/Time | Number of administrations per time |
| [ord]_sch_tme | Schedule.Time | Time | Duration of a single administration |
| [ord]_adj_qty | Order.Adjust | Adjust Unit | Patient-specific adjustor (e.g., kg or m²) |
| [ord]_dur | Order.Duration | Time | Total duration of the order |
| [orb]_dos_qty | Orderable.Dose.Quantity | Orderable Unit | Dose per administration |
| [orb]_dos_rte | Orderable.Dose.Rate | Orderable Unit/Time | Administration rate |
| [orb]_dos_ptm | Orderable.Dose.PerTime | Orderable Unit/Time | Dose per unit time (e.g., per day) |
| [orb]_dos_qty_adj | Orderable.Dose.QuantityAdjust | Orderable Unit/Adjust Unit | Adjusted dose per administration |
| [orb]_dos_rte_adj | Orderable.Dose.RateAdjust | Orderable Unit/Adjust Unit/Time | Adjusted administration rate |
| [orb]_dos_ptm_adj | Orderable.Dose.PerTimeAdjust | Orderable Unit/Adjust Unit/Time | Adjusted dose per unit time |

Optional at Item/Component level when relevant:

| Variable | Name | Unit | Description |
| :---- | :---- | :---- | :---- |
| [itm]_dos_qty | Item.Dose.Quantity | Item Unit | Dose per administration of an Item |
| [itm]_dos_rte | Item.Dose.Rate | Item Unit/Time | Administration rate for an Item |
| [itm]_dos_ptm | Item.Dose.PerTime | Item Unit/Time | Dose per unit time for an Item |
| [itm]_dos_qty_adj | Item.Dose.QuantityAdjust | Item Unit/Adjust Unit | Adjusted dose per administration |
| [itm]_dos_rte_adj | Item.Dose.RateAdjust | Item Unit/Adjust Unit/Time | Adjusted rate |
| [itm]_dos_ptm_adj | Item.Dose.PerTimeAdjust | Item Unit/Adjust Unit/Time | Adjusted dose per unit time |

Totals over the order duration (optional, mainly for verification/reporting):

| Variable | Name | Unit | Description |
| :---- | :---- | :---- | :---- |
| [itm]_dos_tot | Item.DoseTotal | Item Unit | Total dose over the order duration |

#### - Variables for Preparation {#--variables-for-preparation}

The preparation describes how to make the dose from available containers/components and their concentrations.

| Variable | Name | Unit | Description |
| :---- | :---- | :---- | :---- |
| [orb]_qty | Orderable.Quantity | Orderable Unit | Quantity of orderable per unit preparation |
| [orb]_ord_qty | Orderable.OrderQuantity | Orderable Unit | Total quantity of orderable to prepare for the order |
| [cmp]_orb_cnc | Component.OrderableConcentration | Component Unit/Orderable Unit | Concentration of a component in the orderable |
| [cmp]_orb_qty | Component.Orderable.Quantity | Component Unit | Quantity of a component per orderable unit |
| [cmp]_orb_cnt | Component.OrderableCount | Count | Number of components (e.g., vials/ampoules) per orderable unit |
| [cmp]_cmp_qty | Component.Quantity | Component Unit | Quantity per component (e.g., content per vial) |
| [itm]_orb_cnc | Item.OrderableConcentration | Item Unit/Orderable Unit | Concentration of an item in the orderable |
| [itm]_cmp_cnc | Item.ComponentConcentration | Item Unit/Component Unit | Concentration of an item in a component |
| [itm]_cmp_qty | Item.ComponentQuantity | Item Unit | Quantity of an item contributed by one component |

#### - Variables for Administration {#--variables-for-administration}

Administration captures what is delivered per administration and over time.

| Variable | Name | Unit | Description |
| :---- | :---- | :---- | :---- |
| [ord]_sch_frq | Schedule.Frequency | Count/Time | Number of administrations per time |
| [ord]_sch_tme | Schedule.Time | Time | Duration of each administration |
| [ord]_dur | Order.Duration | Time | Total planned administration period |
| [orb]_dos_qty | Orderable.Dose.Quantity | Orderable Unit | Quantity delivered per administration |
| [orb]_dos_rte | Orderable.Dose.Rate | Orderable Unit/Time | Delivery rate |
| [orb]_dos_ptm | Orderable.Dose.PerTime | Orderable Unit/Time | Quantity delivered per unit time |
| [orb]_ord_qty | Orderable.OrderQuantity | Orderable Unit | Total delivered over the order duration |

Totals over the order duration (optional, mainly for verification/reporting):

| Variable | Name | Unit | Description |
| :---- | :---- | :---- | :---- |
| [itm]_dos_tot | Item.Dose.Total | Item Unit | Total delivered over the order duration |

Optional when pump programming or verification at component/item level is required:

| Variable | Name | Unit | Description |
| :---- | :---- | :---- | :---- |
| [cmp]_dos_qty | Component.Dose.Quantity | Component Unit | Component quantity per administration |
| [cmp]_dos_rte | Component.Dose.Rate | Component Unit/Time | Component delivery rate |
| [cmp]_dos_ptm | Component.Dose.PerTime | Component Unit/Time | Component per unit time |
| [itm]_dos_qty | Item.Dose.Quantity | Item Unit | Item quantity per administration |
| [itm]_dos_rte | Item.Dose.Rate | Item Unit/Time | Item delivery rate |
| [itm]_dos_ptm | Item.Dose.PerTime | Item Unit/Time | Item per unit time |
